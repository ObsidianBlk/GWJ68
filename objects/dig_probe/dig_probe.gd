extends Actor

# ------------------------------------------------------------------------------
# Signals
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Constants and ENUMs
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Export Variables
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Variables
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Onready Variables
# ------------------------------------------------------------------------------
@onready var _dig_polygon: Polygon2D = $DigPolygon


# ------------------------------------------------------------------------------
# Setters / Getters
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Override Methods
# ------------------------------------------------------------------------------
func _unhandled_input(event: InputEvent) -> void:
	if _IsActionOneOf(event, [&"left", &"right"]):
		move(Input.get_axis(&"left", &"right"))
	if event.is_action_pressed(&"action"):
		if _dig_polygon != null:
			Relay.dig(_GetGlobalPolygon())

# ------------------------------------------------------------------------------
# Private Methods
# ------------------------------------------------------------------------------
func _IsActionOneOf(event : InputEvent, actions : Array[StringName]) -> bool:
	for action : StringName in actions:
		if event.is_action(action):
			return true
	return false

func _GetGlobalPolygon() -> PackedVector2Array:
	var arr : Array[Vector2] = []
	if _dig_polygon != null:
		var gpos : Vector2 = global_position
		for point : Vector2 in _dig_polygon.polygon:
			arr.append(point + gpos)
	return PackedVector2Array(arr)

# ------------------------------------------------------------------------------
# Public Methods
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Handler Methods
# ------------------------------------------------------------------------------



