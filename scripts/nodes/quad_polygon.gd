extends Polygon2D
class_name QuadPolygon

# ------------------------------------------------------------------------------
# Signals
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Constants and ENUMs
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Export Variables
# ------------------------------------------------------------------------------
@export var world_polygon : PackedVector2Array:			set=set_world_polygon, get=get_world_polygon

# ------------------------------------------------------------------------------
# Variables
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Onready Variables
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Setters / Getters
# ------------------------------------------------------------------------------
func set_world_polygon(poly : PackedVector2Array) -> void:
	var points : Array[Vector2] = []
	var gpos : Vector2 = global_position
	for point in poly:
		points.append(point - gpos)
	update_polygon(PackedVector2Array(points))

func get_world_polygon() -> PackedVector2Array:
	var points : Array[Vector2] = []
	var gpos : Vector2 = global_position
	for point in polygon:
		points.append(point + gpos)
	return PackedVector2Array(points)

# ------------------------------------------------------------------------------
# Override Methods
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Private Methods
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Public Methods
# ------------------------------------------------------------------------------
func update_polygon(points : PackedVector2Array) -> void:
	polygon = points

# ------------------------------------------------------------------------------
# Handler Methods
# ------------------------------------------------------------------------------



