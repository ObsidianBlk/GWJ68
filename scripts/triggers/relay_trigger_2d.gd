extends BasicTrigger2D
class_name RelayTrigger2D

# ------------------------------------------------------------------------------
# Signals
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Constants and ENUMs
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Export Variables
# ------------------------------------------------------------------------------
@export_category("Relay Trigger 2D")
@export var connection : BasicTrigger2D = null:			set=set_connection

# ------------------------------------------------------------------------------
# Variables
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Onready Variables
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Setters / Getters
# ------------------------------------------------------------------------------
func set_connection(conn : BasicTrigger2D) -> void:
	_DisconnectConnection()
	connection = conn
	_ConnectConnection()

# ------------------------------------------------------------------------------
# Override Methods
# ------------------------------------------------------------------------------
func _ready() -> void:
	_ConnectConnection()

# ------------------------------------------------------------------------------
# Private Methods
# ------------------------------------------------------------------------------
func _ConnectConnection() -> void:
	if connection == null: return
	if not connection.state_changed.is_connected(trigger):
		connection.state_changed.connect(trigger)
	trigger(connection.is_active())

func _DisconnectConnection() -> void:
	if connection == null: return
	if connection.state_changed.is_connected(trigger):
		connection.state_changed.disconnect(trigger)

# ------------------------------------------------------------------------------
# Public Methods
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Handler Methods
# ------------------------------------------------------------------------------



